{"version":3,"file":"static/webpack/static/development/pages/_app.js.52d05069c89d2fbaa15d.hot-update.js","sources":["webpack:///./pages/_app.js"],"sourcesContent":["import React from 'react'\nimport Header from '../components/header'\nimport App, { Container } from 'next/app'\nimport fetch from 'isomorphic-unfetch'\n\nimport '../components/shared.css'\n\nclass MyApp extends App {\n  constructor() {\n    super()\n    this.state = {\n      userToken: '',\n      isLoggedIn: false,\n      loginErrorMessage: ''\n    }\n  }\n  static async getInitialProps({ Component, ctx }) {\n    let pageProps = {}\n\n    if (Component.getInitialProps) {\n      pageProps = await Component.getInitialProps(ctx)\n    }\n    const res = await fetch(\n      'https://hpvtexas.wpengine.com/wp-json/better-rest-endpoints/v1/pages'\n    )\n    const menu = await fetch(\n      'https://hpvtexas.wpengine.com/wp-json/better-rest-endpoints/v1/menus/main'\n    )\n    const data = await res.json()\n    const menudata = await menu.json()\n\n    return { pageProps: pageProps, menudata: menudata }\n  }\n\n  async getLogin(user, pass) {\n    const rawResponse = await fetch(\n      'https://hpvtexas.wpengine.com/wp-json/jwt-auth/v1/token',\n      {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          username: user,\n          password: pass\n        })\n      }\n    )\n    const res = await rawResponse.json()\n    if (!res.data.status) {\n      this.setState({\n        userToken: res.token,\n        isLoggedIn: true\n      })\n    } else if (res.message) {\n      console.log(res.message)\n      this.setState({\n        loginErrorMessage: res.message\n      })\n    }\n    console.log(res)\n  }\n\n  render() {\n    const { Component, pageProps } = this.props\n    return (\n      <Container>\n        <Header menudata={this.props.menudata} />\n        <Component\n          {...pageProps}\n          getLogin={this.getLogin}\n          loginData={this.state.loginData}\n        />\n      </Container>\n    )\n  }\n}\n\nexport default MyApp\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAFA;AAOA;AACA;;;;;;AAkBA;;;;;;;AACA;AAGA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AANA;AACA;;AAHA;;AAcA;AACA;;AADA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AADA;AAGA;AACA;AAAA;AACA;;;;;;;;;;;;;;;;;AAEA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;;;;;;;;;;;;AA5DA;AACA;AACA;AACA;;;;;;AACA;AACA;;AADA;AACA;;;AACA;AACA;;AADA;;AAGA;AACA;;AADA;;AAGA;AACA;;AADA;;AACA;AACA;;AADA;AAEA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;;AAzBA;AACA;AAuEA;;;;A","sourceRoot":""}