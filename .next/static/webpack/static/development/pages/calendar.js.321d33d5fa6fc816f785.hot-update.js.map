{"version":3,"file":"static/webpack/static/development/pages/calendar.js.321d33d5fa6fc816f785.hot-update.js","sources":["webpack:///./components/Calendar/CalendarAddEvent.js"],"sourcesContent":["import React, { Component } from 'react'\nimport DatePicker from 'react-datepicker'\nimport 'react-datepicker/dist/react-datepicker.css'\nimport Moment from 'moment'\n\nclass CalendarAddEvent extends Component {\n  constructor() {\n    super()\n    this.state = {\n      startDate: new Date().now,\n      endDate: new Date().now,\n      title: '',\n      allDay: false\n    }\n    this.handleChangeStart = this.handleChangeStart.bind(this)\n    this.handleChangeEnd = this.handleChangeEnd.bind(this)\n    this.handleSubmit = this.handleSubmit.bind(this)\n    this.handleChangeTitle = this.handleChangeTitle.bind(this)\n    this.handleChangeAllDay = this.handleChangeAllDay.bind(this)\n    this.msgField = React.createRef()\n  }\n\n  async handleSubmit() {\n    this.msgField.className = ''\n    this.msgField.current.classList.add('calendar-add-msg ', 'msg-field')\n    var noErrors = true;\n    if(this.state.title.length < 1){\n      noErrors = false;\n    }\n    if(noErrors){\n    const rawResponse = await fetch(\n      'https://hpvtexas.wpengine.com/wp-json/wp/v2/event',\n      {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: 'Bearer ' + this.props.loginData.userToken\n        },\n        body: JSON.stringify({\n          title: this.state.title,\n          status: 'publish'\n        })\n      }\n    )\n    const res = await rawResponse.json()\n    console.log(res)\n\n    const acfPost = await fetch(\n      `https://hpvtexas.wpengine.com/wp-json/acf/v3/event/${res.id}`,\n      {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: 'Bearer ' + this.props.loginData.userToken\n        },\n        body: JSON.stringify({\n          fields: {\n            all_day: this.state.allDay,\n            start: Moment(this.state.startDate).format('YYYY-M-D H:m:s'),\n            end: Moment(this.state.endDate).format('YYYY-M-D H:m:s'),\n            approved: false\n          }\n        })\n      }\n    )\n    const acfRes = await acfPost.json()\n    console.log(acfRes)\n    } else{\n      this.msgField.current.innerHTML = 'ERROR: NO TITLE FOUND'\n      this.msgField.current.classList.add('msg-field-shown', 'msg-error')\n    }\n  }\n\n  handleChangeStart(date) {\n    if (this.state.endDate < date) {\n      this.setState({\n        startDate: date,\n        endDate: date\n      })\n    }\n    this.setState({\n      startDate: date\n    })\n    console.log(Moment(this.state.endDate).format('YYYY-M-D H:m:s'))\n  }\n  handleChangeEnd(date) {\n    this.setState({\n      endDate: date\n    })\n  }\n\n  handleChangeTitle(e) {\n    this.setState({\n      title: e.currentTarget.value\n    })\n    console.log(this.state)\n  }\n  handleChangeAllDay(e) {\n    this.setState({\n      allDay: e.currentTarget.checked\n    })\n  }\n  render() {\n    return (\n      <div className=\"calendar-add-event\">\n      <p className='calendar-add-msg msg-field' ref={this.msgField}></p>\n        <div class='calendar-add-event-form'>\n        <label>\n          Event Name\n          <input\n            type=\"text\"\n            placeholder=\"Event Name\"\n            onChange={this.handleChangeTitle}\n          />\n        </label>\n        <label>\n          All Day?\n          <input type=\"checkbox\" onChange={this.handleChangeAllDay} />\n        </label>\n        <label>\n          Start Date\n          <div className=\"icon-and-date-picker\">\n            <i className=\"far fa-calendar-alt\" />\n            <DatePicker\n              selected={this.state.startDate}\n              onChange={this.handleChangeStart}\n              startDate={this.state.startDate}\n              endDate={this.state.endDate}\n              minDate={new Date()}\n              name=\"startDate\"\n              dateFormat=\"MM/dd/yyyy h:mm aa\"\n              showTimeInput\n              locale=\"en\"\n              selectsStart\n              shouldCloseOnSelect={false}\n            />\n          </div>\n        </label>\n        <i className=\"fas fa-angle-right\" />\n        <label>\n          End Date\n          <div className=\"icon-and-date-picker\">\n            <i className=\"far fa-calendar-alt\" />\n            <DatePicker\n              selected={this.state.endDate}\n              onChange={this.handleChangeEnd}\n              startDate={this.state.startDate}\n              endDate={this.state.endDate}\n              minDate={this.state.startDate}\n              name=\"startDate\"\n              dateFormat=\"MM/dd/yyyy h:mm aa\"\n              showTimeInput\n              locale=\"en\"\n              selectsEnd\n              shouldCloseOnSelect={false}\n            />\n          </div>\n        </label>\n        <button onClick={this.handleSubmit}>Submit Event To Review</button>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default CalendarAddEvent\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AAbA;AAcA;AACA;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;;;;;;AACA;AAGA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AANA;AACA;;AAHA;;AAcA;AACA;;AADA;AACA;;AAEA;AAGA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AAJA;AADA;AANA;AACA;;AAHA;;AAkBA;AACA;;AADA;AACA;;;;;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;AAGA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAAA;AACA;AADA;AAGA;AACA;;;AACA;AACA;AACA;AADA;AAGA;;;AAEA;AACA;AACA;AADA;AAGA;AACA;;;AACA;AACA;AACA;AADA;AAGA;;;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;;;;AA7JA;AACA;AA+JA;;;;A","sourceRoot":""}